<div class="app-clusters-container">
  <section class="app-clusters-index" *ngIf="hasCloudAccount && hasCluster">
    <div class="app-context-header-panel">
      <h2>
        <i class="fa fa-server"></i>
        Clusters
      </h2>

      <button type="button" class="btn btn-primary" [routerLink]="['/clusters/new']">Deploy New Cluster</button>
      <div class="context-secondary-panel">
        <button [disabled]="selected.length === 0" type="button" class="btn btn-primary" (click)="deleteKube()">Delete Selected Cluster</button>
        <div class="context-search-layout">
          <input (keyup)="keyUpFilter($event.target.value)" name="search" placeholder="Search" type="search">
        </div>
      </div>
    </div>

    <div>
      <ngx-datatable class="material expandable"
        [rows]="rows"
        [columnMode]="'force'"
        [columns]="columns"
        [headerHeight]="50"
        [footerHeight]="50"
        [rowHeight]="'auto'"
        [limit]="20"
        [selected]="selected"
        (select)='onSelect($event)'
        (activate)='onActivate($event)'
        [selectionType]="'checkbox'"
        [selectAllRowsOnPage]="true"
        [displayCheck]="displayCheck"
        (tableContextmenu)="onTableContextMenu($event)">
        <ngx-datatable-column
            [width]="30"
            [sortable]="false"
            [canAutoResize]="false"
            [draggable]="false"
            [resizeable]="false"
            [headerCheckboxable]="true"
            [checkboxable]="true"
            >
        </ngx-datatable-column>
        <ngx-datatable-column name="Name" prop="name"></ngx-datatable-column>
        <ngx-datatable-column name="Cloud Account" prop="cloudaccount"></ngx-datatable-column>
        <ngx-datatable-column name="Version" prop="version"></ngx-datatable-column>
        <ngx-datatable-column name="Nodes" prop="nodes"></ngx-datatable-column>
        <ngx-datatable-column name="Apps" prop="apps"></ngx-datatable-column>
        <ngx-datatable-column name="Status" prop="status"></ngx-datatable-column>
        <ngx-datatable-column name="Usage" prop="usage">
          <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
            {{column.name}}
          </ng-template>
          <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
            <canvas baseChart width="200" height="50"
                    [datasets]="row['chartData']"
                    [labels]="rowChartLabels"
                    [legend]="rowChartLegend"
                    [options]="rowChartOptions"
                    [colors]="rowChartColors"
                    [chartType]="rowChartType">
            </canvas>
          </ng-template>
        </ngx-datatable-column>
    </ngx-datatable>
    <context-menu #basicMenu>
      <ng-template contextMenuItem let-item (execute)="contextDelete($event.item)">
        Delete {{item?.name}}
      </ng-template>
    </context-menu>
    </div>
  </section>
  <section class="app-clusters-index" *ngIf="hasCloudAccount && !hasCluster">
    No Cluster Call to Action
  </section>
  <section class="app-clusters-index" *ngIf="!hasCloudAccount && !hasCluster">
    No Cluster AND no Cloud Account call to action
  </section>
</div>
